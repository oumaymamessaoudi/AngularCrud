<div class="ajout-container">
  <h2 class="ajout-heading">{{ isUpdateActive ? 'Modifier étudiant' : 'Ajout étudiant' }}</h2>
  <div class="registration-form m-3 p-4">
    <form [formGroup]="registrationForm">
      <div class="row">
        <div class="col-md-6">
          <mat-form-field appearance="outline">
            <mat-label>Prénom</mat-label>
            <input formControlName="firstName" matInput placeholder="firstName">
            <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline">
            <mat-label>Nom</mat-label>
            <input formControlName="lastName" matInput placeholder="lastName">
            <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline">
            <mat-label>Email</mat-label>
            <input formControlName="email" matInput placeholder="email">
            <mat-icon matSuffix>mail_outline</mat-icon>
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline">
            <mat-label>N° tel</mat-label>
            <input type="text" formControlName="mobile" matInput placeholder="mobile">
            <mat-icon matSuffix>mobile_screen_share</mat-icon>
            <mat-error *ngIf="registrationForm.get('mobile')?.hasError('invalidPhone') && (registrationForm.get('mobile')?.dirty || registrationForm.get('mobile')?.touched)">Invalid phone number</mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline">
            <mat-label>Choisir une date</mat-label>
            <input formControlName="dob" matInput [matDatepicker]="picker">
            <mat-hint>MM/DD/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>
        <div class="col-md-6 ">
          
        
          <mat-form-field appearance="outline">
            <mat-label>Gouvernorat</mat-label>
            <mat-select formControlName="gouvernoratName" placeholder="Choose a Gouvernorat" 
                        (selectionChange)="onGouvernoratChange($event.value)">
              <mat-option *ngFor="let gouvernorat of gouvernorats" [value]="gouvernorat.gouvernoratName">
                {{ gouvernorat.gouvernoratName }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

          <div class="col-md-6">

          <mat-form-field appearance="outline">
            <mat-label>Ville</mat-label>
            <mat-select formControlName="villeName" placeholder="Choose a Ville">
              <!-- Use *ngIf to display only villes corresponding to the selected gouvernorat -->
              <mat-option *ngFor="let ville of villes" [value]="ville.villeName">
                {{ ville.villeName }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        
        <div class="col-md-6">
          <mat-form-field appearance="outline">
            <mat-label>Adresse</mat-label>
            <input formControlName="adr" matInput placeholder="Adresse">
            <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
          </mat-form-field>
        </div>

        

        <div class="row">
          <div class="col-md-6">
            <button mat-raised-button color="accent" (click)="annuler();" class="annuler-button">
              <span style="font-size: 1.8em;">&#8592;</span> <!-- Unicode arrow character -->
              <span style="margin-right: 5px;">Annuler</span>
            </button>
          </div>
  
          <div class="col-md-6 buttons-container" style="display: flex; justify-content: flex-end;">
            <div style="display: flex; justify-content: space-between;">
              <button *ngIf="!isUpdateActive" (click)="Submit()" mat-raised-button color="accent">Ajouter</button>
              <button *ngIf="isUpdateActive" (click)="update()" mat-raised-button color="accent">Mettre à jour</button>
            </div>
          </div>
        </div>


        
  <ng-confirm></ng-confirm>